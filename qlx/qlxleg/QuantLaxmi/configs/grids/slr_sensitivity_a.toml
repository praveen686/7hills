# SLR Sensitivity Grid A - Cost-Aware Controls Sweep
#
# Strategy: slr (SLRT-GPU v1.1 Execution Binding)
# v1.2.0 with anti-churn controls
#
# This grid varies the 4 key knobs that control trade frequency and quality:
# - min_d_perp_mantissa: Instability threshold (higher = fewer trades in quiet markets)
# - tau_dir_enter: Direction alignment required (higher = more conviction needed)
# - u_aggressive_mantissa: Urgency for crossing (higher = more passive, worse fills)
# - min_hold_ms: Minimum hold time (higher = less churn)
#
# Total combinations: 4 × 2 × 3 × 3 = 72 runs

[params]
# d_perp threshold (mantissa, exp -2)
# 430 = 4.3 (p95), 520 = 5.2 (p96), 600 = 6.0 (p97), 680 = 6.8 (p99)
min_d_perp_mantissa = [430, 520, 600, 680]

# Direction hysteresis (integer vote count, 1-3)
# 2 = require 2/3 aligned, 3 = require all 3 aligned
tau_dir_enter = [2, 3]

# Exit threshold (fixed at 1 - collapse when only 1 vote or less aligned)
tau_dir_exit = [1]

# Urgency threshold for aggressive crossing (mantissa, exp -2)
# 60 = 0.60, 75 = 0.75, 85 = 0.85
# Higher = more passive, fewer crosses
u_aggressive_mantissa = [60, 75, 85]

# Minimum hold time (ms) before exit allowed
# 2000 = 2s, 3000 = 3s, 5000 = 5s
min_hold_ms = [2000, 3000, 5000]

# Cooldown after exit (ms) before new entry allowed
# Fixed at 1s to prevent rapid re-entry
cooldown_after_exit_ms = [1000]

# ============================================================================
# Fixed parameters (not varied in this grid)
# ============================================================================

# Regime thresholds (SEALED from SLRT spec)
tau_d_perp_mantissa = [200]           # 2.0
tau_fragility_mantissa = [60]         # 0.6
tau_fti_persist_mantissa = [30]       # 0.3
tau_toxicity_persist_mantissa = [30]  # 0.3
tau_confidence_mantissa = [50]        # 0.5
threshold_exponent = [-2]

# Entry gate thresholds (not used as hard gates, kept for compatibility)
min_fragility_mantissa = [78]
min_toxicity_mantissa = [11]

# Direction weights (SEALED §7.2)
alpha1_mantissa = [40]
alpha2_mantissa = [40]
alpha3_mantissa = [20]
alpha_exponent = [-2]

# Urgency weights (SEALED §7.5)
urgency_d_perp_mantissa = [40]
urgency_fragility_mantissa = [40]
urgency_toxicity_mantissa = [20]
urgency_exponent = [-2]

# Execution mapping
slip_cap_ticks = [2]
tick_size_mantissa = [10]

# Position sizing (0.01 BTC)
base_position_mantissa = [1000000]
qty_exponent = [-8]
price_exponent = [-2]

# Trade permission
allow_r2_trades = [false]
